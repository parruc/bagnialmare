{% extends "base.html" %}

{% load i18n %}

{% block bodyclass %}homepage-body-class{% endblock %}
{% block navbarclass %}homepage-navbar{% endblock %}
{% block logoimage %}<img src="{{ STATIC_URL }}img/logo_red.jpg" />{% endblock %}

{% block content %}
  {% trans "home_heading" as t_home_heading %}
  {% trans "home_sub_heading" as t_home_sub_heading %}
  {% trans "what" as t_what %}
  {% trans "home_facility_tooltip" as t_home_facility_tooltip %}
  {% trans "home_show_facility" as t_home_show_facility %}
  {% trans "home_near_to" as t_home_near_to %}
  {% trans "home_sort_by_ditance" as t_home_sort_by_distance %}
  {% trans "home_search" as t_home_search %}
  {% comment %}
    TODO: Da rifattorizzare in un template tag da usare sia qui che in search?
  {% endcomment %}
  <div class="row homepage-first-row">
  <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-3 col-md-8 col-md-offset-2 homepage-box-wrapper">
    <h1 class="homepage-headline" >{{ t_home_heading }}</h1>
    <p class="homepage-sub-headline">{{ t_home_sub_heading }}</p>
            <form id="search-form" class="col-xs-12 homepage-form" action="{% url 'search' %}" method="get">
                <input type="hidden" name="pos" value="" />
                <div class="col-md-5 homepage-input-div">
                    <label class="sr-only" for="search_q">{{ t_what|capfirst }}</label>
                    <div class="input-group input-group-lg">
                        <input class="form-control input-lg homepage-input" type="text" id="search_q" name="q" value="{{ q }}" placeholder="{{ t_what|capfirst }}">
                        <span class="input-group-btn"><button id="facilities-list-trigger" title="{{ t_home_show_facility }}" class="btn btn-default hp-facility-btn" type="button" onclick="showFacilitiesModal()"><span class="glyphicon glyphicon-list"></span></button></span>
                    </div>
                    <div class="ui-front"></div>
                </div>
                <div class="col-md-5 homepage-input-div">
                    <label class="sr-only" for="search_l">{{ t_home_near_to|capfirst }}</label>
                    <input class="form-control input-lg homepage-input" type="text" id="search_l" name="l" value="{{ l }}" placeholder="{{Â t_home_near_to|capfirst }}">
                    <div class="ui-front"></div>
                    <a href="#" id="set-my-position" data-position-label="{{ my_position }}">
                        {{ t_home_sort_by_distance }}
                    </a>
                </div>
                <div class="col-md-2 homepage-input-div">
                <button type="submit" id="search_submit" class="btn btn-lg btn-primary homepage-input search-button" value="search">{{ t_home_search|capfirst }}</button>
                </div>
            </form>
        </div>
    </div>
   
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Click on a facility to choose it</h4>
          </div>
          <div class="modal-body">
              <h4>Sport</h4>
              <p><a href="#" onclick="populateWhatField(this)">Ping Pong</a> | <a href="#" onclick="populateWhatField(this)">Beach Volley</a> | <a href="#" onclick="populateWhatField(this)">Windsurf</a></p>
              <h4>Beauty and Spa</h4>
              <p><a href="#" onclick="populateWhatField(this)">Solarium</a> | <a href="#" onclick="populateWhatField(this)">Massaggi</a> | <a href="#" onclick="populateWhatField(this)">etc.</a></p>
              <h4>Etc.</h4>
              <p><a href="#" onclick="populateWhatField(this)">etc.</a></p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

{% endblock %}

{% block specific_js %}
    <script type="text/javascript" src="{{ STATIC_URL }}js/autocomplete.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/geolocation.js"></script>
    <script type="text/javascript">
        $(function() {
        $.backstretch("{{ STATIC_URL }}img/ombrelloni.jpg");
        });
        function showFacilitiesModal(){
            $('#myModal').modal();
        };
        function populateWhatField(aTag){
            $('#myModal').modal('hide');
            var whatInput = document.getElementById('search_q');
            whatInput.focus();
            if(whatInput.value === ''){
                whatInput.value = aTag.innerHTML;
            } else{
               whatInput.value = aTag.innerHTML + ', ' + whatInput.value; 
            }
        };
    </script>
{% endblock specific_js %}

{% block title %}
{% trans "homepage_title" as t_homepage_title %}
{{ t_homepage_title|title }}
{% endblock title %}

{% block pagetitle %}
{% trans "homepage_title" as t_homepage_title %}
{{ t_homepage_title|title }}
{% endblock pagetitle %}
