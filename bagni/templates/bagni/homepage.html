{% extends "base.html" %}

{% load i18n %}

{% block bodyclass %}homepage-body-class{% endblock %}
{% block navbarclass %}homepage-navbar{% endblock %}
{% block logoimage %}<img src="{{ STATIC_URL }}img/logo_red.jpg" />{% endblock %}

{% block content %}
    {% comment %}
        TODO: Da rifattorizzare in un template tag da usare sia qui che in search?
    {% endcomment %}
    <div class="row homepage-first-row">
        <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-3 col-md-8 col-md-offset-2 homepage-box-wrapper">
            <h1 class="homepage-headline" >{% trans "Tutte le informazioni sui bagni della Riviera Romagnola." %}</h1>
            <p class="homepage-sub-headline">{% trans "Contatti, servizi offerti e indirizzi di oltre 1000 stabilimenti balneari da Cattolica a Ferrara."%}</p>

            <form id="search-form" class="col-xs-12 homepage-form" action="{% url 'search' %}" method="get">
                <input type="hidden" name="pos" value="" />
                <div class="col-md-5 homepage-input-div">
                    <label class="sr-only" for="search_q">{% trans 'What' %}</label>
                    <div class="input-group input-group-lg">
                        <input class="form-control input-lg homepage-input" type="text" id="search_q" name="q" value="{{ q }}" placeholder="{% trans 'What' %}">
                        <span class="input-group-btn"><button id="facilities-list-trigger" data-toggle="tooltip" title="{% trans "Show the facility list" %}" class="btn btn-default hp-facility-btn" type="button" onclick="showFacilitiesModal()"><span class="glyphicon glyphicon-list"></span></button></span>
                    </div>
                    <div class="ui-front"></div>
                </div>
                <div class="col-md-5 homepage-input-div">
                    <label class="sr-only" for="search_l">{% trans 'Near to' %}</label>
                    <input class="form-control input-lg homepage-input" type="text" id="search_l" name="l" value="{{ l }}" placeholder="{% trans 'Near to' %}">
                    <div class="ui-front"></div>
                    <a href="#" id="set-my-position" data-position-label="{{ my_position }}">
                        {% trans 'sort by distance from me' %}
                    </a>
                </div>
                <div class="col-md-2 homepage-input-div">
                    <button data-toggle="tooltip" data-placement="top"  data-original-title="See the facilities list" type="submit" id="search_submit" class="btn btn-lg btn-primary homepage-input search-button" value="search">{% trans "Search" %}</button>
                </div>
            </form>
        </div>
    </div>
   
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Click on a facility to choose it</h4>
          </div>
          <div class="modal-body">
              <h4>Sport</h4>
              <p><a href="#" onclick="populateWhatField(this)">Ping Pong</a> | <a href="#" onclick="populateWhatField(this)">Beach Volley</a> | <a href="#" onclick="populateWhatField(this)">Windsurf</a></p>
              <h4>Beauty and Spa</h4>
              <p><a href="#" onclick="populateWhatField(this)">Solarium</a> | <a href="#" onclick="populateWhatField(this)">Massaggi</a> | <a href="#" onclick="populateWhatField(this)">etc.</a></p>
              <h4>Etc.</h4>
              <p><a href="#" onclick="populateWhatField(this)">etc.</a></p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

{% endblock %}

{% block specific_js %}
    <script type="text/javascript" src="{{ STATIC_URL }}js/autocomplete.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/geolocation.js"></script>
    <script type="text/javascript">
        $(function() {
        $.backstretch("{{ STATIC_URL }}img/ombrelloni.jpg");
        });
        function showFacilitiesModal(){
            $('#myModal').modal();
        };
        $(function () { $("#facilities-list-trigger").tooltip({container: 'body', placement: 'top'}); });
        $(function () { $("#facilities-list-trigger").tooltip('show'); });
        function populateWhatField(aTag){
            $('#myModal').modal('hide');
            var whatInput = document.getElementById('search_q');
            if(whatInput.value === ''){
                whatInput.value = aTag.innerHTML;
            } else{
               whatInput.value = whatInput.value + ', ' + aTag.innerHTML; 
            }
        };
    </script>
{% endblock specific_js %}

{% block title %}{% endblock title %}

{% block pagetitle %}{% trans "Homepage" %}{% endblock pagetitle %}
